<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON dari GitHub</title>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap/bootstrap.min.css">
</head>
<body>
  <!-- Header -->
    <div class="bg-primary" id="Header">
      <h1 class="p-5 text-center">Pemrograman Berbasis Web 1</h1>
      <nav class="navbar navbar-expand-lg bg-info p-1" style="width:100%">
	    <div class="container-fluid">
	      <a class="navbar-brand navbar-link m-0 px-4" href="#" style="text-align: center; color: black;">PBW1</a>
	      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="navbar-toggler-icon"></span>
	      </button>
	      <div class="collapse navbar-collapse" id="navbarSupportedContent">
	        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
	          <li class="navbar-link nav-item">
	            <a class="nav-link active" aria-current="page" href="#" style="width: 100%;text-align: center; color: black;">Home</a>
	          </li>
	          <li class="navbar-link nav-item">
	            <a class="nav-link active" aria-current="page" href="#" style="width: 100%;text-align: center; color: black;">About</a>
	          </li>
	          <li class="navbar-link nav-item">
	            <a class="nav-link active" aria-current="page" href="#" style="width: 100%;text-align: center; color: black;">ContactUS</a>
	          </li>
	        </ul>
	        <form class="d-flex" role="search" style="width: 100%; color: black;">
	          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"/>
	          <button class="btn btn-outline-info" type="submit" id="tSearch" style="color: black;"
	              onMouseOver="handleMouseEnter"
	              onMouseOut="handleMouseLeave">Search</button>
	        </form>
	      </div>
	    </div>
	  </nav>
    </div>
    <!-- Header -->
    <!-- Konten -->
    <div id="formIP">
      <h1>Input Data Mahasiswa</h1>
      <form onsubmit="addMhs()" method="POST">
        <table>
          <tr>
            <th><label for="nim">NIM</label></th>
            <td>:</td>
            <td><input type="text" name="nim" id="nim" placeholder="Input NIM Mahasiswa" style="justify-items: left "></th>
          </tr>
          <tr>
            <th><label for="nama">Nama</label></th>
            <td>:</td>
            <td><input type="text" name="nama" id="nama" placeholder="Input Nama Mahasiswa" style="justify-items: left "></th>
          </tr>
          <tr>
            <th><label for="kelas">Kelas</label></th>
            <td>:</td>
            <td><input type="text" name="kelas" id="kelas" placeholder="Input Kelas Mahasiswa" style="justify-items: left "></th>
          </tr>
          <tr>
            <th><label for="address">Web Address</label></th>
            <td>:</td>
            <td><input type="text" name="address" id="address" placeholder="Input Web Address Mahasiswa" style="justify-items: left "></th>
          </tr>
          <tr>
            <td colspan=3>
              <input type="submit" name="submit" id="submit" value="Simpan" class="btn btn-primary" style="width: 147px">
              <a href="daftarAW.html" class="btn btn-primary" style="width: 147px">Kembali</a>
            </td>
          </tr>
        </tbody>
      </Table>
      </form>
    </div>
    <!-- Konten -->
    <!-- Footer -->
    <div class="d-flex align-items-center justify-content-center" id="Footer">
      <h4 class="text-center m-0 p-3">Semester Genap Tahun Ajaran 2024-2025</h4>
    </div>
    <!-- Footer -->
</body>
</html>

<script type="text/javascript">
  // script simpan data
  let xhr = new XMLHttpRequest();
xhr.open('GET', 'https://raw.githubusercontent.com/marta32225/webdata/refs/heads/master/db.json', true);
xhr.responseType = 'json'; // Atur agar respons otomatis di-parse sebagai JSON
xhr.onload = function() {
  if (xhr.status === 200) {
    console.log(xhr.response); // Menampilkan data objek
  } else {
    console.error('Error:', xhr.status);
  }
};
xhr.send();


  var nim = document.getElementById("nim").value;
  var nama = document.getElementById("nama").value;
  var kelas = document.getElementById("kelas").value;
  var address = document.getElementById("address").value;
  // fungsi untuk menambah data produk melalui API ketika tombol "Add" di klik
  function addMhs () {
    const newMhs = {nim,nama,kelas,address}

    fetch('https://raw.githubusercontent.com/marta32225/webdata/refs/heads/master/db.json', {
            method: 'POST',
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(newMhs)
        }).then(() => {
      // ketika sukses menambah data, reset form dengan mengeset state produk menjadi empty string 
            console.log('new mahasiswa added.')
        })
    .catch(error => {
        console.error('Gagal memuat data JSON:', error);
        document.getElementById('jsonData').textContent = 'Gagal memuat data.';
    }
);
  }
  // script simpan data 

  // Tombol Search
	// Dapatkan elemen tombol
	const myButton = document.getElementById('tSearch');

	// Ubah warna latar belakang saat mouse diarahkan ke tombol
	myButton.onmouseover = function() {
	  myButton.style.backgroundColor = '#0d6efd';
	};

	// Ubah warna latar belakang kembali saat mouse keluar dari tombol
	myButton.onmouseout = function() {
	  myButton.style.backgroundColor = '#0dcaf0'; // Ganti dengan warna default Anda
	};
  // Tombol Search

</script>